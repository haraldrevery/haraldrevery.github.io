---
title: Development Setup Guide
date: 2024-11-02
tags: [web]
image: /photos/2015-2023/12jun2019_min.jpg
description: This is Claude LLM (Sonnet 4.5) generated summary for this website
---


# Development Setup Guide

This guide will help you get the website running on both **Windows** and **Linux**.

---

## Prerequisites

### Required Software
- **Node.js** (v18 or later recommended)
  - Windows: Download from [nodejs.org](https://nodejs.org/)
  - Linux: `sudo apt install nodejs npm` (Ubuntu/Debian) or `sudo dnf install nodejs` (Fedora)
- **Tailwind CSS Standalone CLI v4.1.18**
  - Download from [GitHub Releases](https://github.com/tailwindlabs/tailwindcss/releases/tag/v4.1.18)

---

## Initial Setup

### 1. Install Node.js Dependencies

```bash
npm install
```

This will install:
- `@11ty/eleventy` - Static site generator
- `markdown-it` - Markdown parser
- `markdown-it-attrs` - Markdown attributes plugin
- `gray-matter` - Front matter parser

### 2. Download Tailwind CSS Standalone CLI

#### Windows
1. Download `tailwindcss-windows-x64.exe` (v4.1.18) from the [releases page](https://github.com/tailwindlabs/tailwindcss/releases/tag/v4.1.18)
2. Rename it to `tw.exe`
3. Place it in the project root directory

#### Linux
1. Download `tailwindcss-linux-x64` (v4.1.18) from the [releases page](https://github.com/tailwindlabs/tailwindcss/releases/tag/v4.1.18)
2. Rename it to `tw`
3. Place it in the project root directory
4. Make it executable:
   ```bash
   chmod +x tw
   ```

---

## Project Structure

Your project should have this structure:

```
project-root/
├── eleventy_settings/       # Eleventy layouts (base.njk, etc.)
│   ├── base.njk            # Main layout template
│   ├── post.njk            # Blog post layout
│   ├── nav.njk             # Navigation component
│   └── footer.njk          # Footer component
├── javascript/             # Client-side JavaScript files
│   ├── alpine.min.js       # Alpine.js for reactive components
│   ├── glightbox.min.js    # GLightbox library for image lightboxes
│   ├── glightbox_settings_min.js  # GLightbox configuration
│   ├── navbar_scroll_min.js       # Navbar scroll animations
│   └── audioplayer_min.js         # Custom audio player for music page
├── markdown_text/           # Markdown blog posts (.md files)
├── html_extras/            # Standalone HTML blog posts (optional)
├── notebook_pages/         # Generated output (Eleventy creates this)
├── fonts/                  # Web fonts
│   ├── HaraldReveryTextFont.woff2
│   └── HaraldReveryMonoFont.woff2
├── photos/                 # Images and media assets
│   └── bgtexture.jpg
├── music/                  # Audio files for music player
│   └── mp3/
│       ├── Harald_Revery_-_Phrases.mp3
│       ├── Harald_Revery_-_Forest_Rain.mp3
│       └── ... (other tracks)
├── eleventy.config.js      # Eleventy configuration
├── package.json            # Node dependencies
├── input.css               # Main Tailwind input
├── input_prose.css         # Prose-specific Tailwind input (for blog posts)
├── theme.css               # Custom CSS variables and theme
├── blog.njk                # Notebook index page template
├── blog-tag.njk            # Tag pages template
├── index.html              # Homepage
├── music.html              # Music page
├── about.html              # About page
├── notebook.html           # Generated notebook index
├── download.html           # Download page
├── contact.html            # Contact page
├── legal.html              # Legal/privacy page
├── main.css                # Generated CSS (minified)
├── main_max.css            # Generated CSS (unminified)
├── prose.css               # Generated prose CSS (minified)
├── prose_max.css           # Generated prose CSS (unminified)
├── dev.bat                 # Windows development script
├── dev.sh                  # Linux development script
├── tw.exe                  # Tailwind CLI (Windows)
├── tw                      # Tailwind CLI (Linux)
├── .elevenyignore          # Files to ignore
├── favicon.ico             # Favicon files
├── favicon-96x96.png
├── apple-touch-icon.png
└── opengraphimg.jpg        # Social media preview image
```

**Important Notes:**
- `notebook_pages/` is auto-generated by Eleventy - you don't need to create it manually
- The `fonts/` and `photos/` directories contain your static assets
- Generated CSS files (`main.css`, `prose.css`, etc.) can be gitignored
- `.html` files in the root are either static pages or generated by Eleventy from `.njk` templates

---

## Required Directories & Assets

Before running the site, make sure you have these essential directories:

### Must Have:
- **`eleventy_settings/`** - Contains your Eleventy layout templates
  - `base.njk` - Main layout wrapper
  - `post.njk` - Blog post template
  - `nav.njk` - Navigation component
  - `footer.njk` - Footer component
- **`javascript/`** - Client-side JavaScript files (see JavaScript section below)
- **`fonts/`** - Your web fonts (HaraldReveryTextFont.woff2, HaraldReveryMonoFont.woff2)
- **`theme.css`** - CSS custom properties and variables (referenced in input_prose.css)

### Optional (but recommended):
- **`markdown_text/`** - Put your markdown blog posts here
- **`html_extras/`** - Put standalone HTML posts here
- **`photos/`** - Store images and media assets
- **`music/mp3/`** - Audio files for the music player (if using the music page)

### Auto-Generated:
- **`notebook_pages/`** - Eleventy creates this automatically when it builds

If any of these are missing, the build will fail with errors about missing files or templates.

---

## JavaScript Components

The site uses several JavaScript libraries and custom scripts for interactive features:

### Core Libraries

**Alpine.js** (`alpine.min.js`)
- Lightweight reactive framework (similar to Vue.js)
- Used for the audio player on the music page
- Provides reactive data binding with `x-data`, `x-show`, `@click` directives
- No build step required - works directly in HTML

**GLightbox** (`glightbox.min.js` + `glightbox_settings_min.js`)
- Image lightbox/gallery library
- Opens images in a fullscreen overlay
- Configuration in `glightbox_settings_min.js`:
  - Selector: `.glightbox` class on images
  - Touch navigation enabled
  - Loop and zoom features enabled

### Custom Scripts

**Navbar Scroll Animation** (`navbar_scroll_min.js`)
- Controls navbar visibility on scroll
- Uses CSS `animation-timeline: scroll()` when supported
- Falls back to JavaScript scroll listener for older browsers
- Hides navbar at top, shows when scrolling down

**Audio Player** (`audioplayer_min.js`)
- Custom Alpine.js component for the music page
- Features:
  - Play/pause, previous/next track navigation
  - Progress bar with click-to-seek
  - Volume control (desktop only, iOS doesn't allow volume control)
  - Track playlist with 8 pre-configured songs
  - Error handling and loading states
  - Touch-friendly drag controls

**Track List:**
1. Phrases
2. Forest Rain
3. Looking for Snow
4. Uninhabited Island
5. Clouds and Roads
6. Isolated
7. Mystery Card
8. The North (feat. Light Titum)

To add/modify tracks, edit the `tracks` array in `audioplayer_min.js`.

### Where JavaScript is Loaded

All JavaScript files are loaded in `base.njk` template with `defer` attribute:
```html
<script src="/javascript/glightbox.min.js" defer></script>
<script src="/javascript/glightbox_settings_min.js" defer></script>
<script src="/javascript/alpine.min.js" defer></script>
```

The navbar scroll script is likely loaded separately in individual HTML pages.

---

## Running the Development Environment

### Windows

**Option 1: Run both Eleventy and Tailwind together**
```cmd
dev.bat
```

This starts 4 Tailwind watch processes:
1. Main CSS (minified) → `main.css`
2. Main CSS (unminified) → `main_max.css`
3. Prose CSS (minified) → `prose.css`
4. Prose CSS (unminified) → `prose_max.css`

Then in a **separate terminal**, start Eleventy:
```cmd
npm start
```

**Option 2: Run individually**
```cmd
npm start          # Eleventy dev server
.\tw.exe --help    # Check Tailwind is working
```

### Linux

**Option 1: Run both Eleventy and Tailwind together**

First, make the script executable:
```bash
chmod +x dev.sh
```

Then run it:
```bash
./dev.sh
```

This starts 4 Tailwind watch processes (same as Windows).

Then in a **separate terminal**, start Eleventy:
```bash
npm start
```

**Option 2: Run individually**
```bash
npm start      # Eleventy dev server
./tw --help    # Check Tailwind is working
```

---

## What Each Script Does

### `dev.bat` / `dev.sh`
Runs 4 concurrent Tailwind CSS build processes that watch for changes:
- Generates both minified (production) and unminified (debugging) versions
- Watches all `.html` and `.md` files in root and `notebook_pages/`
- Automatically rebuilds CSS when files change

### `npm start`
- Starts Eleventy development server
- Watches for changes in templates and content
- Serves the site locally (typically at `http://localhost:8080`)
- Auto-reloads browser on changes

---

## Building for Production

### Build Everything
```bash
# Build Eleventy site
npm run build

# Build CSS (run individually or all 4):
./tw -i input.css -o main.css --minify
./tw -i input_prose.css -o prose.css --minify
```

The production-ready files will be in your output directory.

---

## Common Issues & Troubleshooting

### Windows Issues

**"tw.exe is not recognized"**
- Make sure `tw.exe` is in the project root
- Check you renamed it correctly from `tailwindcss-windows-x64.exe`

**Multiple command windows stay open**
- This is normal - each Tailwind process runs in its own window
- Close them all with Ctrl+C or by closing the windows

### Linux Issues

**"Permission denied" when running `./tw`**
```bash
chmod +x tw
```

**"Permission denied" when running `./dev.sh`**
```bash
chmod +x dev.sh
```

**Script doesn't run**
- Make sure the script has Unix line endings (LF not CRLF)
- If you edited on Windows, run: `dos2unix dev.sh` (install with `sudo apt install dos2unix`)

### Both Platforms

**"Module not found" errors**
```bash
rm -rf node_modules package-lock.json  # or delete manually
npm install
```

**CSS not updating**
- Make sure the Tailwind watch process is running (`dev.bat` or `dev.sh`)
- Check that your HTML files are in the paths specified in the `--content` flag
- Restart the Tailwind process

**Eleventy not finding templates**
- Check that `eleventy_settings/` directory exists with your layouts
- Verify `eleventy.config.js` is in the root directory

---

## Stopping the Development Servers

### Windows
- Press `Ctrl+C` in each terminal window
- Or close the terminal windows

### Linux
- Press `Ctrl+C` in the terminal running `dev.sh`
- If background processes persist: `killall tw`

---

## How the Site Works

### Template Hierarchy (Eleventy)

**Layouts:**
- `base.njk` - Master layout that all pages use
  - Includes meta tags, CSS links, JavaScript imports
  - Includes `nav.njk` and `footer.njk` components
  - Wraps page content in `{{ content | safe }}`
- `post.njk` - Extends `base.njk` for blog posts
  - Adds article wrapper, back button, date display
  - Applies `.prose` class for typography styling

**Pages:**
- `.njk` templates compile to `.html` files at specified permalinks
- `blog.njk` → `notebook.html` (notebook index)
- `blog-tag.njk` → `notebook_pages/notebook_tag-{tag}.html` (tag pages)

### Static Pages (root directory)
- `index.html` - Homepage (static)
- `music.html` - Music page with Alpine.js audio player (static)
- `about.html` - About page (static)
- `download.html` - Download page (static)
- `contact.html` - Contact page (static)
- `legal.html` - Legal/privacy page (static)

### Dynamic Pages (Eleventy generates these)
- `blog.njk` → `notebook.html` - Main notebook index listing all posts
- `blog-tag.njk` → `notebook_pages/notebook_tag-{tag}.html` - One page per tag
- Markdown posts in `markdown_text/` → `notebook_pages/*.html`

### Blog Posts Collection

The site combines two sources into one `notebook_posts` collection:

1. **Markdown posts** (`markdown_text/`) 
   - Written in Markdown with YAML frontmatter
   - Compiled to HTML by Eleventy
   - Output to `notebook_pages/`

2. **HTML posts** (`html_extras/`)
   - Already written in HTML with YAML frontmatter
   - Copied directly to `notebook_pages/`
   - Parsed as "virtual" collection items

Both are sorted by date (newest first) and displayed together on the notebook index.

### CSS Generation (Tailwind)

The Tailwind CLI watches for changes and generates 4 CSS files:
- `main.css` / `main_max.css` - Main styles for all pages
- `prose.css` / `prose_max.css` - Typography styles specifically for blog posts

**What gets watched:**
- All `.html` files in root directory
- All `.html` and `.md` files in `notebook_pages/**/*`

**Inputs:**
- `input.css` → Generates `main.css` and `main_max.css`
- `input_prose.css` → Generates `prose.css` and `prose_max.css`
  - Imports Tailwind Typography plugin (`@tailwindcss/typography`)
  - Imports `theme.css` for custom CSS variables

### How They Connect

**CSS Loading:**
1. All pages load `main.css` for base styling
2. Blog posts additionally load `prose.css` for typography
3. The `.prose` class applies styled formatting to markdown content

**Navigation:**
1. Tag links point to auto-generated tag pages: `/notebook_pages/notebook_tag-{tag}.html`
2. Post cards link to individual posts in `/notebook_pages/`
3. Footer includes social media links and site navigation

**JavaScript Features:**
1. **GLightbox** - Click images with `.glightbox` class to open lightbox
2. **Alpine.js** - Powers the audio player on music page
3. **Navbar animation** - Auto-hides/shows navbar based on scroll position

### SEO & Meta Tags

The `base.njk` layout includes:
- Open Graph tags for social media previews
- Canonical URLs
- Schema.org structured data for articles
- Preloaded fonts for performance
- Responsive meta viewport

---

## Additional Notes

- The `.elevenyignore` file tells Eleventy which files to skip during build
- Generated CSS files (`main.css`, `prose.css`, etc.) should be in `.gitignore`
- The `notebook_pages/` output directory is auto-generated and can be gitignored
- Dark mode styling is handled automatically via `prefers-color-scheme` media queries
- All paths use absolute references from root (e.g., `/fonts/`, `/photos/`)
- The site uses custom web fonts loaded from the `/fonts/` directory
- Social media previews use `opengraphimg.jpg` in the root directory

### Adding New Blog Posts

**Markdown posts:**
1. Create a `.md` file in `markdown_text/`
2. Add frontmatter (title, date, tags, image, description)
3. Write your content in markdown
4. Eleventy will automatically generate the HTML in `notebook_pages/`

**HTML posts:**
1. Create an `.html` file in `html_extras/`
2. Add frontmatter at the top using `---` delimiters
3. Write your HTML content below
4. Eleventy copies it to `notebook_pages/` and adds it to the collection

### Customizing the Music Player

To modify the track list in the audio player:

1. Open `/javascript/audioplayer_min.js`
2. Find the `tracks` array in the `audioPlayer()` function
3. Add/remove/modify track objects:
   ```javascript
   {
     title: "Your Song Title",
     artist: "Artist Name", 
     url: "./music/mp3/your_file.mp3",
     color1: "#hexcolor",      // Gradient start color
     color2: "#hexcolor",      // Gradient end color
     btnColor: "bg-gradient-to-br from-color to-color"  // Tailwind classes
   }
   ```
4. Place your MP3 files in `/music/mp3/`
5. Reload the music page to see changes

---

## Quick Reference

| Task | Windows | Linux |
|------|---------|-------|
| Install dependencies | `npm install` | `npm install` |
| Start dev server | `npm start` | `npm start` |
| Build for production | `npm run build` | `npm run build` |
| Run Tailwind watchers | `dev.bat` | `./dev.sh` |
| Stop all processes | `Ctrl+C` | `Ctrl+C` or `killall tw` |

---

## Need Help?

If you encounter issues not covered here:
1. Check that all prerequisites are installed correctly
2. Verify the project structure matches the layout above
3. Make sure you're using the correct Tailwind CSS version (v4.1.18)
4. Check the terminal output for specific error messages
